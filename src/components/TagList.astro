---
import { getCollection } from 'astro:content';
import { Badge } from '@astrojs/starlight/components';

const posts = await getCollection('docs');
// Extract all tags, flatten them, and remove duplicates
const allTags = [...new Set(posts.flatMap(post => post.data.tags || []))].sort();
---

<div class="tag-cloud not-content">
  {allTags.map(tag => (
    <a href={`/tags/${tag.toLowerCase()}`} style="text-decoration: none; margin-right: 0.5rem;">
      <Badge text={tag} variant="note" size="medium" />
    </a>
  ))}
</div>

<style>
  .tag-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
  }
  /* Optional hover effect */
  .tag-cloud a:hover :global(.sl-badge) {
    background-color: var(--sl-color-accent-low);
    border-color: var(--sl-color-accent);
  }
</style>